<div class="medicamento-form-container">
  <mat-card class="form-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>medication</mat-icon>
        Prescrever Medicamento
      </mat-card-title>
      <mat-card-subtitle
        >Preencha os dados da prescricao medicamentosa</mat-card-subtitle
      >
    </mat-card-header>

    <mat-card-content>
      <form
        [formGroup]="medicamentoForm"
        (ngSubmit)="onSubmit()"
        class="medicamento-form"
      >
        <!-- ID do Profissional -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>ID do Profissional</mat-label>
          <input
            matInput
            type="number"
            formControlName="profissionalId"
            placeholder="Digite o ID do profissional"
          />
          <mat-icon matSuffix>badge</mat-icon>
          <mat-error
            *ngIf="medicamentoForm.get('profissionalId')?.hasError('required')"
          >
            {{ getErrorMessage("profissionalId") }}
          </mat-error>
        </mat-form-field>

        <!-- Nome do Medicamento -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nome do Medicamento</mat-label>
          <input
            matInput
            formControlName="medicamentoNome"
            placeholder="Ex: Paracetamol 500mg"
          />
          <mat-icon matSuffix>local_pharmacy</mat-icon>
          <mat-error
            *ngIf="medicamentoForm.get('medicamentoNome')?.hasError('required')"
          >
            {{ getErrorMessage("medicamentoNome") }}
          </mat-error>
        </mat-form-field>

        <!-- Dosagem -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Dosagem</mat-label>
          <input matInput formControlName="dosagem" placeholder="Ex: 500mg" />
          <mat-icon matSuffix>straighten</mat-icon>
          <mat-error
            *ngIf="medicamentoForm.get('dosagem')?.hasError('required')"
          >
            {{ getErrorMessage("dosagem") }}
          </mat-error>
        </mat-form-field>

        <!-- Via de Administracao -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Via de Administracao</mat-label>
          <mat-select formControlName="viaAdministracao">
            <mat-option
              *ngFor="let via of viasAdministracao"
              [value]="via.value"
            >
              {{ via.label }}
            </mat-option>
          </mat-select>
          <mat-icon matSuffix>route</mat-icon>
          <mat-error
            *ngIf="
              medicamentoForm.get('viaAdministracao')?.hasError('required')
            "
          >
            {{ getErrorMessage("viaAdministracao") }}
          </mat-error>
        </mat-form-field>

        <!-- Frequencia de Administracao -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Frequencia de Administracao</mat-label>
          <mat-select formControlName="frequenciaAdministracao">
            <mat-option
              *ngFor="let freq of frequenciasAdministracao"
              [value]="freq.value"
            >
              {{ freq.label }}
            </mat-option>
          </mat-select>
          <mat-icon matSuffix>schedule</mat-icon>
          <mat-error
            *ngIf="
              medicamentoForm
                .get('frequenciaAdministracao')
                ?.hasError('required')
            "
          >
            {{ getErrorMessage("frequenciaAdministracao") }}
          </mat-error>
        </mat-form-field>

        <!-- Indicacao Clinica -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Indicacao Clinica</mat-label>
          <textarea
            matInput
            formControlName="indicacaoClinica"
            rows="3"
            placeholder="Ex: Dor, febre, hipertensao"
          ></textarea>
          <mat-icon matSuffix>assignment</mat-icon>
          <mat-error
            *ngIf="
              medicamentoForm.get('indicacaoClinica')?.hasError('required')
            "
          >
            {{ getErrorMessage("indicacaoClinica") }}
          </mat-error>
        </mat-form-field>

        <!-- Data de Inicio -->
        <mat-form-field appearance="outline" class="half-width">
          <mat-label>Data de Inicio</mat-label>
          <input
            matInput
            [matDatepicker]="pickerInicio"
            formControlName="dataInicio"
            placeholder="Selecione a data"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="pickerInicio"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerInicio></mat-datepicker>
          <mat-error
            *ngIf="medicamentoForm.get('dataInicio')?.hasError('required')"
          >
            {{ getErrorMessage("dataInicio") }}
          </mat-error>
        </mat-form-field>

        <!-- Data de Fim -->
        <mat-form-field appearance="outline" class="half-width">
          <mat-label>Data de Fim (Opcional)</mat-label>
          <input
            matInput
            [matDatepicker]="pickerFim"
            formControlName="dataFim"
            placeholder="Selecione a data"
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="pickerFim"
          ></mat-datepicker-toggle>
          <mat-datepicker #pickerFim></mat-datepicker>
        </mat-form-field>

        <!-- Quantidade -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Quantidade (Opcional)</mat-label>
          <input
            matInput
            formControlName="quantidade"
            placeholder="Ex: 30 comprimidos, 1 frasco"
          />
          <mat-icon matSuffix>inventory</mat-icon>
        </mat-form-field>

        <!-- Instrucoes de Uso -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Instrucoes de Uso</mat-label>
          <textarea
            matInput
            formControlName="instrucoesUso"
            rows="3"
            placeholder="Ex: Tomar apos as refeicoes, nao ingerir bebidas alcoolicas"
          ></textarea>
          <mat-icon matSuffix>info</mat-icon>
        </mat-form-field>

        <!-- Observacoes -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Observacoes</mat-label>
          <textarea
            matInput
            formControlName="observacoes"
            rows="2"
            placeholder="Observacoes adicionais"
          ></textarea>
          <mat-icon matSuffix>note</mat-icon>
        </mat-form-field>

        <!-- Botoes de Acao -->
        <div class="form-actions">
          <button
            mat-button
            type="button"
            (click)="goBack()"
            [disabled]="loading"
          >
            <mat-icon>arrow_back</mat-icon>
            Cancelar
          </button>
          <button
            mat-raised-button
            color="primary"
            type="submit"
            [disabled]="loading"
          >
            <mat-icon>save</mat-icon>
            {{ loading ? "Salvando..." : "Prescrever Medicamento" }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>

<!--
   __  ____ ____ _  _
 / _\/ ___) ___) )( \
/    \___ \___ ) \/ (
\_/\_(____(____|____/
-->
